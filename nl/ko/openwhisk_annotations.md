---

copyright:
  years: 2016, 2018
lastupdated: "2018-04-12"

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:pre: .pre}

# 어노테이션
{: #openwhisk_annotations}

{{site.data.keyword.openwhisk}} 액션, 트리거, 룰 및 패키지(집합적으로 자산이라고 함)를 `어노테이션`으로 꾸밀 수 있습니다. 어노테이션은 값을 정의하는 이름을 정의하는 `key`와 값을 정의하는 `value`의 매개변수처럼 자산에 첨부됩니다. `--annotation` 플래그(또는 간략히 `-a`)를 사용하여 명령행 인터페이스(CLI)에서 이를 설정하는 것이 편리합니다.
{: shortdesc}

근거: 기본 자산 스키마의 변경 없이 실험이 허용되도록 어노테이션이 {{site.data.keyword.openWhisk_short}}에 추가되었습니다. 이 문서를 작성할 때까지는 어떤 `어노테이션`이 허용되는지를 정의하지 않으려는 의도적인 노력이 있었습니다. 그러나 어노테이션이 시맨틱 변경사항의 전달을 위해 보다 많이 사용되므로 이의 문서화를 시작하는 것이 중요합니다.

지금까지 어노테이션의 가장 일반적인 사용은 액션 및 패키지를 문서화화는 것입니다. {{site.data.keyword.openWhisk_short}} 카탈로그의 대부분의 패키지는 어노테이션을 전달합니다(예: 해당 액션이 제공하는 기능의 설명, 패키지 바인딩 시간에 사용할 매개변수, invoke-time 매개변수 또는 매개변수가 "시크릿"(예: 비밀번호)인지 여부). 어노테이션은 필요에 따라 작성됩니다(예: UI 통합을 허용하기 위해).

다음은 `echo` 액션에 대한 샘플 어노테이션 세트이며, 이는 입력 인수를 수정하지 않고 리턴합니다(예: `function main(args) { return args }`). 이 액션은 입력 매개변수의 로깅에 유용합니다(예: 시퀀스 또는 룰의 일부로서).
```
ibmcloud fn action create echo echo.js \
    -a description 'An action which returns its input. Useful for logging input to enable debug/replay.' \
    -a parameters  '[{ "required":false, "description": "Any JSON entity" }]' \
    -a sampleInput  '{ "msg": "Five fuzzy felines"}' \
    -a sampleOutput '{ "msg": "Five fuzzy felines"}'
```
{: pre}

**패키지**를 설명하는 어노테이션에는 다음이 포함됩니다.

- `description`: 패키지의 간결하고 함축적인 설명입니다.
- `parameters`: 패키지로 범위가 한정된 매개변수를 설명하는 배열입니다.

**액션**을 설명하는 어노테이션에는 다음이 포함됩니다.

- `description`: 액션의 간결하고 함축적인 설명입니다.
- `parameters`: 액션 실행에 필요한 액션을 설명하는 배열입니다.
- `sampleInput`: 일반 값의 입력 스키마를 표시하는 예제입니다.
- `sampleOutput`: (일반적으로 `sampleInput`에 대한) 출력 스키마를 표시하는 예제입니다.

**매개변수**를 설명하는 어노테이션에는 다음이 포함됩니다.

- `name`: 매개변수의 이름입니다.
- `description`: 매개변수의 간결하고 함축적인 설명입니다.
- `doclink`: (OAuth 토큰에 유용한) 매개변수의 추가 문서에 대한 링크입니다.
- `required`: 필수 매개변수의 경우에는 true이며, 선택적 매개변수의 경우에는 false입니다.
- `bindTime`: 패키지가 바인드될 때 매개변수가 지정되어 있으면 true입니다.
- `type`: 매개변수의 유형이며 `password` 또는 `array` 중 하나입니다(단, 보다 광범위하게 사용될 수 있음).

어노테이션은 체크되어 있지 _않습니다_. 따라서, 어노테이션을 사용하여 예를 들어 시퀀스로 2개의 액션 구성이 적합한지 여부를 추론할 수 있지만 시스템은 아직 이를 수행하지 않습니다.

## 웹 액션에 특정한 어노테이션
{: #annotations-specific-to-web-actions}

최근에는 코어 API가 새 기능으로 확장되었습니다. 패키지와 액션이 이러한 기능에 참여할 수 있도록 하기 위해 시맨틱하게 의미가 있는 새 어노테이션이 도입되었습니다. 이러한 어노테이션이 유효하려면 명시적으로 `true`로 설정되어야 합니다. `true`에서 `false`로 값을 변경하면 첨부된 자산이 새 API에서 제외됩니다. 어노테이션은 시스템에서 별다른 의미가 없습니다. 다음 어노테이션을 참조하십시오.

- `web-export`: 액션에만 적용됩니다. 존재하는 경우, 이는 인증 _없이_ REST 호출이 해당 액션에 액세스할 수 있도록 합니다. 예를 들어, 사용자가 브라우저에서 OpenWhisk 액션을 사용할 수 있도록 하므로, 이를 [_웹 액션_](openwhisk_webactions.html)이라고 합니다. 웹 액션의 _소유자_가 시스템에서 실행 비용을 유발한다는 점을 반드시 유념하십시오. 다시 말하면, 액션의 _소유자_ 역시 활성화 레코드를 소유합니다.
- `final`: 액션에만 적용됩니다. 이는 이미 정의된 모든 액션 매개변수가 불변이 되도록 합니다. 일단 매개변수값이 엔클로징 패키지 또는 액션 정의를 통해 정의되면 어노테이션을 전달하는 액션의 매개변수는 invoke-time 매개변수에 의해 대체될 수 없습니다.
- `raw-http`: `web-export` 어노테이션이 존재할 때 액션에만 적용됩니다. 존재하는 경우, HTTP 요청 조회 및 본문 매개변수는 예약된 특성으로서 액션에 전달됩니다.
- `web-custom-options`: 설정된 경우, 이 어노테이션은 웹 액션이 사용자 정의된 헤더의 OPTIONS 요청에 응답할 수 있도록 합니다. 그렇지 않으면, [기본 CORS 응답](openwhisk_webactions.html#options-requests)이 적용됩니다.
- `require-whisk-auth`: 이 어노테이션은 해당 인증 신임 정보를 제공하는 요청을 통해서만 호출되도록 웹 액션을 보호합니다. 부울 값으로 설정하면 요청의 기본 인증 값(예: Whisk 인증 키)을 인증할지 여부를 제어합니다. `true` 값은 신임 정보를 인증하고 `false` 값은 인증 없이 액션을 호출합니다. 숫자 또는 문자열로 설정되면 이 값이 요청의 `X-Require-Whisk-Auth` 헤더 값과 일치해야 합니다. 두 경우 모두 웹 액션의 _소유자_가 시스템에서 실행 비용을 유발한다는 점을 반드시 유념하십시오(예: 액션의 _소유자_가 활성화 레코드도 소유함).

## 활성화에 특정한 어노테이션

시스템은 다음 어노테이션으로 활성화 레코드를 강조할 수 있습니다.

- `path`: 활성화를 생성한 액션의 완전한 경로 이름입니다. 이 활성화가 패키지 바인딩의 액션의 결과인 경우에 경로가 상위 패키지를 참조한다는 점에 유념하십시오.
- `kind`: 실행된 액션의 유형이며, 지원 OpenWhisk 런타임 유형 중 하나입니다.
- `limits`: 이 활성화가 종속된 시간, 메모리 및 로그 한계입니다.

시퀀스 관련 활성화의 경우, 시스템은 다음 어노테이션을 생성합니다.

- `topmost`: 이는 가장 외부의 시퀀스 액션에 대해서만 존재합니다.
- `causedBy`: 이는 시퀀스에 포함된 액션에 대해서만 존재합니다.

마지막으로, 성능 투명성을 제공하기 위해 활성화는 또한 다음을 기록합니다.

- `waitTime`: 내부 OpenWhisk 시스템에서 대기 중일 때 사용한 시간입니다. 이는 활성화 요청을 수신하는 제어기 및 액션에 대해 호출기가 컨테이너를 프로비저닝하는 시점 간에 소요된 개략적인 시간입니다. 이 값은 현재 비-시퀀스 관련 활성화에 대해서만 존재합니다. 시퀀스의 경우, 이 정보는 `topmost` 시퀀스 활성화 레코드에서 파생될 수 있습니다.
- `initTime`: 함수 초기화 시에 사용된 시간입니다. 이 값이 존재하는 경우, 액션은 초기화를 필요로 하며 콜드 스타트를 표시합니다. 웜 활성화는 초기화를 건너뛰며, 이 경우에는 어노테이션이 생성되지 않습니다.

활성화 레코드에 나타날 때 이러한 어노테이션의 예제는 아래에 표시되어 있습니다.

```javascript
"annotations": [
  {
    "key": "path",
    "value": "guest/echo"
  },
  {
    "key": "waitTime",
    "value": 66
  },
  {
    "key": "kind",
    "value": "nodejs:6"
  },
  {
    "key": "initTime",
    "value": 50
  },
  {
    "key": "limits",
    "value": {
      "logs": 10,
      "memory": 256,
      "timeout": 60000
    }
  }
]
```
{: codeblock}
